{% extends "base.html" %}
{% load static i18n %}
{% block title %}Tickets{% endblock %}
{% load crispy_forms_tags %}

{% block style %}
<style>

.tablink {
    background-color: #555;
    color: white;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    font-size: 17px;
    width: 25%;
}

.card-footer:hover {
    background-color: rgba(0, 0, 0, 0.09);
}

.tabcontent {
    {#color: white;#}
    {#display: none;#}
    padding-bottom: 50px;
    animation: fadeEffect 1s; /* Fading effect takes 1 second */
}

/* Go from zero to full opacity */
@keyframes fadeEffect {
    from {opacity: 0;}
    to {opacity: 1;}
}

</style>
{% endblock style %}

{% block content %}

      <div class="row">

        <!--Drafts-->
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-success o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-shopping-cart"></i>
              </div>
              <div class="mr-5"><h6>Drafts</h6></div>
            </div>
            <a class="card-footer text-white clearfix small z-1" onclick="openTab('DraftsTab', this)" id="defaultOpen" href="#DraftsTab/">
              <span class="float-left">View Details</span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
        <!--Complaints-->
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-primary o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-comments"></i>
              </div>
              <div class="mr-5"><h6>{{ user_complaints_count }} Complaints</h6></div>
            </div>
            <a class="card-footer text-white clearfix small z-1" onclick="openTab('ComplaintsTab', this)" href="#ComplaintsTab/">
{#            <a class="card-footer text-white clearfix small z-1" data-toggle="collapse" href="#collapsecomplaints" aria-expanded="false" aria-controls="collapsecomplaints">#}
              <span class="float-left">View Details</span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
        <!--Requests-->
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-warning o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-list"></i>
              </div>
              <div class="mr-5"><h6>{{ user_requests_count }} Requests</h6></div>
            </div>
{#            <a class="card-footer text-white clearfix small z-1"  data-toggle="collapse" href="#collapserequests" aria-expanded="false" aria-controls="collapserequests">#}
              <a class="card-footer text-white clearfix small z-1" onclick="openTab('RequestsTab', this)" href="#RequestsTab/">
              <span class="float-left">View Details</span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
        <!--Cases-->
        <div class="col-xl-3 col-sm-6 mb-3">
          <div class="card text-white bg-danger o-hidden h-100">
            <div class="card-body">
              <div class="card-body-icon">
                <i class="fa fa-fw fa-support"></i>
              </div>
              <div class="mr-5"><h6>{{ user_cases_count }} Cases</h6></div>
            </div>
{#            <a class="card-footer text-white clearfix small z-1"  data-toggle="collapse" href="#collapsecases" aria-expanded="false" aria-controls="collapsecases">#}
              <a class="card-footer text-white clearfix small z-1" onclick="openTab('CasesTab', this)" href="#CasesTab/">
              <span class="float-left">View Details</span>
              <span class="float-right">
                <i class="fa fa-angle-right"></i>
              </span>
            </a>
          </div>
        </div>
      </div>

      <!--Drafts-->
      <div class="tabcontent" id="DraftsTab">
        <div class="card bg-success ">

        <div class="card card-body">
         <div class="row">
           <!--Complaints-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-primary text-white" >
                <div class="float-left">
                  <i class="fa fa-envelope-open-o fa-lg"  aria-hidden="true"></i>
                  <span class="ml-1">Complaints</span>
                </div>
                <div class="float-right"><strong>{{ user_complaints_count_open }}</strong></div>
              </div>

              <div class="card-body">

                    {% for ticket in tickets %}
                      {% ifequal ticket.ticket_type "Complaint" %}
                        {% ifequal ticket.ticket_state "Draft" %}

                            {% include 'forms/ticket_view.html' %}

                        {% endifequal %}
                      {% endifequal %}
                    {% endfor %}

            </div>
              </div>
            </div>
           <!--Requests-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-warning text-white" >
                <div class="float-left">
                  <i class="fa fa-refresh fa-lg fa-fw"></i>
                  <span class="ml-1">Requests</span>
                </div>
                <div class="float-right"><strong>{{ user_complaints_count_in_progress }}</strong></div>
              </div>

              <div class="card-body">

                   {% for ticket in tickets %}
                        {% ifequal ticket.ticket_type "Request" %}
                          {% ifequal ticket.ticket_state "Draft" %}

                            {% include 'forms/ticket_view.html' %}

                          {% endifequal %}
                        {% endifequal %}
                      {% endfor %}
              </div>
            </div>
            </div>
           <!--Cases-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-danger text-white" >
                <div class="float-left">
                  <i class="fa fa-times-circle-o fa-lg"></i>
                  <span class="ml-1">Cases</span>
                </div>
                <div class="float-right"><strong>{{ user_complaints_count_closed }}</strong></div>
              </div>

              <div class="card-body">

                    {% for ticket in tickets %}
                      {% ifequal ticket.ticket_type "Case" %}
                        {% ifequal ticket.ticket_state "Draft" %}

                          {% include 'forms/ticket_view.html' %}

                        {% endifequal %}
                      {% endifequal %}
                    {% endfor %}

              </div>
            </div>
            </div>
         </div>
        </div>
      </div>
      </div>
      <!--Complaints-->
      <div class="tabcontent" id="ComplaintsTab">
        <div class="card bg-primary ">

        <div class="card card-body">
         <div class="row">
           <!--Open-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-primary text-white" >
                <div class="float-left">
                  <i class="fa fa-envelope-open-o fa-lg"  aria-hidden="true"></i>
                  <span class="ml-1">Open</span>
                </div>
                <div class="float-right"><strong>{{ user_complaints_count_open }}</strong></div>
              </div>

              <div class="card-body">

                    {% for ticket in tickets %}
                      {% ifequal ticket.ticket_type "Complaint" %}
                        {% ifequal ticket.ticket_state "Open" %}

                            {% include 'forms/ticket_view.html' %}

                        {% endifequal %}
                      {% endifequal %}
                    {% endfor %}

            </div>
              </div>
            </div>
           <!--In Progress-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-primary text-white" >
                <div class="float-left">
                  <i class="fa fa-refresh fa-lg fa-fw"></i>
                  <span class="ml-1">In Progress</span>
                </div>
                <div class="float-right"><strong>{{ user_complaints_count_in_progress }}</strong></div>
              </div>

              <div class="card-body">

                   {% for ticket in tickets %}
                        {% ifequal ticket.ticket_type "Complaint" %}
                          {% ifequal ticket.ticket_state "In Progress" %}

                            {% include 'forms/ticket_view.html' %}

                          {% endifequal %}
                        {% endifequal %}
                      {% endfor %}
              </div>
            </div>
            </div>
           <!--Closed-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-primary text-white" >
                <div class="float-left">
                  <i class="fa fa-times-circle-o fa-lg"></i>
                  <span class="ml-1">Closed</span>
                </div>
                <div class="float-right"><strong>{{ user_complaints_count_closed }}</strong></div>
              </div>

              <div class="card-body">

                    {% for ticket in tickets %}
                      {% ifequal ticket.ticket_type "Complaint" %}
                        {% ifequal ticket.ticket_state "Closed" %}

                          {% include 'forms/ticket_view.html' %}

                        {% endifequal %}
                      {% endifequal %}
                    {% endfor %}

              </div>
            </div>
            </div>
         </div>
        </div>
      </div>
      </div>
        <!--Requests-->
      <div class="tabcontent" id="RequestsTab">
        <div class="card bg-warning ">
        <div class="card card-body">
         <div class="row">
           <!--Open-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-warning text-white" >
                <div class="float-left">
                  <i class="fa fa-envelope-open-o fa-lg"  aria-hidden="true"></i>
                  <span class="ml-1">Open</span>
                </div>
                <div class="float-right"><strong>{{ user_requests_count_open }}</strong></div>
              </div>

              <div class="card-body">

                    {% for ticket in tickets %}
                      {% ifequal ticket.ticket_type "Request" %}
                        {% ifequal ticket.ticket_state "Open" %}

                            {% include 'forms/ticket_view.html' %}

                        {% endifequal %}
                      {% endifequal %}
                    {% endfor %}

              </div>
            </div>
            </div>
           <!--In Progress-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-warning text-white" >
                <div class="float-left">
                  <i class="fa fa-refresh fa-lg fa-fw"></i>
                  <span class="ml-1">In Progress</span>
                </div>
                <div class="float-right"><strong>{{ user_requests_count_in_progress }}</strong></div>
              </div>

              <div class="card-body">

                   {% for ticket in tickets %}
                        {% ifequal ticket.ticket_type "Request" %}
                          {% ifequal ticket.ticket_state "In Progress" %}

                            {% include 'forms/ticket_view.html' %}

                          {% endifequal %}
                        {% endifequal %}
                      {% endfor %}

              </div>
            </div>
            </div>
           <!--Closed-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-warning text-white" >
                <div class="float-left">
                  <i class="fa fa-times-circle-o fa-lg"></i>
                  <span class="ml-1">Closed</span>
                </div>
                <div class="float-right"><strong>{{ user_requests_count_closed }}</strong></div>
              </div>

              <div class="card-body">

                    {% for ticket in tickets %}
                      {% ifequal ticket.ticket_type "Request" %}
                        {% ifequal ticket.ticket_state "Closed" %}

                          {% include 'forms/ticket_view.html' %}

                        {% endifequal %}
                      {% endifequal %}
                    {% endfor %}

              </div>
            </div>
            </div>
         </div>
        </div>
      </div>
      </div>
        <!--Cases-->
      <div class="tabcontent" id="CasesTab">
        <div class="card bg-danger ">

        <div class="card card-body">
         <div class="row">
           <!--Open-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-danger text-white" >
                <div class="float-left">
                  <i class="fa fa-envelope-open-o fa-lg"  aria-hidden="true"></i>
                  <span class="ml-1">Open</span>
                </div>
                <div class="float-right"><strong>{{ user_cases_count_open }}</strong></div>
              </div>

              <div class="card-body">

                    {% for ticket in tickets %}
                      {% ifequal ticket.ticket_type "Case" %}
                        {% ifequal ticket.ticket_state "Open" %}

                            {% include 'forms/ticket_view.html' %}

                        {% endifequal %}
                      {% endifequal %}
                    {% endfor %}

              </div>
            </div>
            </div>
           <!--In Progress-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-danger text-white" >
                <div class="float-left">
                  <i class="fa fa-refresh fa-lg fa-fw"></i>
                  <span class="ml-1">In Progress</span>
                </div>
                <div class="float-right"><strong>{{ user_cases_count_in_progress }}</strong></div>
              </div>

              <div class="card-body">

                   {% for ticket in tickets %}
                        {% ifequal ticket.ticket_type "Case" %}
                          {% ifequal ticket.ticket_state "In Progress" %}

                            {% include 'forms/ticket_view.html' %}

                          {% endifequal %}
                        {% endifequal %}
                      {% endfor %}

              </div>
            </div>
            </div>
           <!--Closed-->
            <div class="col-xl-4 col-sm-6 mb-3">
            <div class="card">
              <div class="card-header bg-danger text-white" >
                <div class="float-left">
                  <i class="fa fa-times-circle-o fa-lg"></i>
                  <span class="ml-1">Closed</span>
                </div>
                <div class="float-right"><strong>{{ user_cases_count_closed }}</strong></div>
              </div>

              <div class="card-body">

                    {% for ticket in tickets %}
                      {% ifequal ticket.ticket_type "Case" %}
                        {% ifequal ticket.ticket_state "Closed" %}

                          {% include 'forms/ticket_view.html' %}

                        {% endifequal %}
                      {% endifequal %}
                    {% endfor %}

              </div>
            </div>
            </div>
         </div>
        </div>
      </div>
      </div>



{% endblock content %}

{% block javascript %}

    <script>
function openTab(tabName, elmnt, color) {
    // Hide all elements with class="tabcontent" by default */
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Remove the background color of all tablinks/buttons
    tablinks = document.getElementsByClassName("tablink");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].style.backgroundColor = "";
    }

    // Show the specific tab content
    document.getElementById(tabName).style.display = "block";

    // Add the specific color to the button used to open the tab content
    elmnt.style.backgroundColor = color;

    openTab.preventDefault();


}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();

  </script>

{% endblock %}

